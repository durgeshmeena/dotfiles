
# https://github.com/dreamsofcode-io/tmux/blob/main/tmux.conf
# tmux source-file ~/.conf/tmux/tmux.conf

# TERM=xterm256color ssh -X mymachine

set -g default-terminal "tmux-256color"
# set -ag terminal-overrides ",xterm-256color:RGB"

# changes for nvim/LazyVim
set-option -sg escape-time 10
set-option -g focus-events on

# make the status bar update every second
set-option -g status-interval 1

# enable mouse click
set -g mouse on
unbind -n MouseDown3Pane

# change default prefix kwey
unbind C-b
set -g prefix C-Space
bind C-Space send-prefix

# clipboard
set -g set-clipboard on

# Start windows and panes at 1, not 0
set -g base-index 1
set -g pane-base-index 1
set-window-option -g pane-base-index 1
set-option -g renumber-windows on


# Use Alt-arrow keys without prefix key to switch panes
#bind -n M-Left select-pane -L
#bind -n M-Right select-pane -R
#bind -n M-Up select-pane -U
#bind -n M-Down select-pane -D


# Shift arrow to switch windows
bind -n S-Left  previous-window
bind -n S-Right next-window

# keep working directory when splitting pane
bind '"' split-window -v -c "#{pane_current_path}"
bind % split-window -h -c "#{pane_current_path}"

bind - split-window -v -c "#{pane_current_path}"
bind \\ split-window -h -c "#{pane_current_path}"

# cycle through panes
#set-option -g repeat-time 500 #milliseconds
bind-key -r o select-pane -t :.+
bind-key -r O select-pane -t :.-



##  theme config
set -g @catppuccin_flavour 'mocha'
# load catppuccin theme ...
run '~/.config/tmux/plugins/tmux/catppuccin.tmux'

#change theme color
#set -ogq @thm_bg "#{@thm_green}"
#set -ogq @thm_fg "#{@thm_peach}"
# custom status sign for window
# Window options
set -g @catppuccin_window_number_color "#{@thm_yellow}"
set -g @catppuccin_window_current_number_color "#{@thm_peach}"
show_window_in_window_status=" #W"
show_directory_in_window_status_current=" #(echo '#{pane_current_path}' | rev | cut -d'/' -f-2 | rev) "
set -g @catppuccin_window_text ${show_window_in_window_status}
set -g @catppuccin_window_current_text ${show_directory_in_window_status_current}

# build status bar
set -g status-left ""
set -g status-right "#{E:@catppuccin_status_application}"

set -g "@catppuccin_my_window_icon" "ï‹’  "
set -g "@catppuccin_my_window_color" "#{E:@thm_sky}"
set -g "@catppuccin_my_window_text" " #W"

set -agF status-right "#[fg=#{@catppuccin_my_window_color}]#{@catppuccin_status_left_separator}#[fg=#{E:@thm_crust},bg=#{@catppuccin_my_window_color}]#{@catppuccin_my_window_icon}#{@catppuccin_status_middle_separator}#[fg=#{E:@thm_fg},bg=#{E:@catppuccin_status_module_text_bg}]#{@catppuccin_my_window_text}#{@catppuccin_status_right_separator}"
set -ag status-right "#{E:@catppuccin_status_session}"

#set -agF status-right "#{E:@catppuccin_status_cpu}"
#set -ag status-right "#{E:@catppuccin_window_text}"
#set -ag status-right "#W "
#set -ag status-right "#{E:@catppuccin_status_session}"
#set -ag status-right "#{E:@catppuccin_status_uptime}"

# Window options
#set -ogq @catppuccin_window_status_style "basic" # basic, rounded, slanted, custom, or none
#set -ogq @catppuccin_window_text_color "#{@thm_surface_0}"
#set -ogq @catppuccin_window_number_color "#{@thm_overlay_2}"
## set -ogq @catppuccin_window_text " #T"
#set -ogq @catppuccin_window_text " #W"
#set -ogq @catppuccin_window_number "#I"
#set -ogq @catppuccin_window_current_text_color "#{@thm_surface_1}"
#set -ogq @catppuccin_window_current_number_color "#{@thm_mauve}"
## set -ogq @catppuccin_window_current_text " #T"
#set -ogq @catppuccin_window_current_text " #W"
#set -ogq @catppuccin_window_current_number "#I"
#set -ogq @catppuccin_window_number_position "left"


# restore last saved environment (automatically)
set -g @continuum-restore 'on'

## --- plugins ---
set -g @plugin 'tmux-plugins/tpm'
#set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'tmux-plugins/tmux-yank'
#theme- https://github.com/catppuccin/tmux
set -g @plugin 'catppuccin/tmux'

# load tpm (https://github.com/tmux-plugins/tpm)
run '~/.tmux/plugins/tpm/tpm'